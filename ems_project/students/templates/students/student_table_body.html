{% for student in students %}
<tr>
    <td>{{ student.roll_number }}</td>
    <td>{{ student.user.get_full_name }}</td>
    <td>{{ student.user.email }}</td>
    <td>{{ student.class_name }}</td>
    <td>{{ student.section }}</td>
    <td>
        <ul class="subject-list">
            {% for course in student.courses.all %}
                <li>{{ course.name }} ({{ course.code }})</li>
            {% empty %}
                <li>No subjects</li>
            {% endfor %}
        </ul>
    </td>
    <td>
        {% if student.allocated_teacher %}
            {{ student.allocated_teacher.get_full_name }}
        {% else %}
            Not Assigned
        {% endif %}
    </td>
    <td>
        <div style="display: flex; gap: 10px;">
            <a href="{% url 'edit_student' student.roll_number %}" class="btn-sm btn-outline-primary">Edit</a>
            <a href="{% url 'delete_student' student.roll_number %}" class="btn-sm btn-outline-danger">Delete</a>
        </div>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="8" style="text-align:center;">No students found.</td>
</tr>
{% endfor %}
