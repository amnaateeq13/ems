{% extends 'users/dashboard_base.html' %}

{% block content %}
<style>
    .announcement-container {
        max-width: 800px;
        margin: 40px auto;
        padding: 30px;
        background-color: #f8f8f8;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .announcement-container h2 {
        text-align: center;
        margin-bottom: 25px;
        color: #2c3e50;
        font-size: 28px;
        border-bottom: 2px solid #ccc;
        padding-bottom: 10px;
    }

    .create-btn {
        display: inline-block;
        padding: 10px 20px;
        background-color: #3498db;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        margin-bottom: 20px;
        transition: background-color 0.3s;
    }

    .create-btn:hover {
        background-color: #2980b9;
    }

    ul.announcement-list {
        list-style: none;
        padding: 0;
    }

    ul.announcement-list li {
        background-color: #ffffff;
        padding: 20px;
        margin-bottom: 20px;
        border-left: 5px solid #3498db;
        border-radius: 6px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    ul.announcement-list li strong {
        font-size: 18px;
        color: #34495e;
    }

    ul.announcement-list li em {
        color: #888;
        font-size: 13px;
        display: block;
        margin-top: 5px;
        margin-bottom: 10px;
    }

    .no-announcements {
        text-align: center;
        color: #999;
        margin-top: 30px;
        font-size: 16px;
    }
    .edit-btn, .delete-btn {
    display: inline-block;
    padding: 6px 12px;
    margin-right: 10px;
    font-size: 13px;
    border-radius: 4px;
    text-decoration: none;
    color: white;
}

.edit-btn {
    background-color: #f39c12;
}

.edit-btn:hover {
    background-color: #d68910;
}

.delete-btn {
    background-color: #e74c3c;
}

.delete-btn:hover {
    background-color: #c0392b;
}

</style>

<div class="announcement-container">
    <h2>Announcements</h2>

    {% if user.role == 'admin' %}
        <a href="{% url 'create_announcement' %}" class="create-btn">Create Announcement</a>
        
    {% endif %}

    {% if announcements %}
        <ul class="announcement-list">
            {% for item in announcements %}
                <li>
                    <strong>{{ item.title }}</strong>
                    <em>{{ item.created_at|date:"d M Y H:i" }} by {{ item.created_by.username }}</em>
                    <em><strong>For:</strong> {{ item.get_audience_display }}</em><br>
                    {{ item.message|linebreaks }}
                    {% if user.role == 'admin' %}
                    <div style="margin-top: 10px;">
                        <a href="{% url 'edit_announcement' item.pk %}" class="edit-btn">Edit</a>
                        <a href="{% url 'delete_announcement' item.pk %}" class="delete-btn" onclick="return confirm('Are you sure you want to delete this announcement?');">Delete</a>
                    </div>
                    {% endif %}
                </li>
            {% endfor %}

        </ul>
    {% else %}
        <p class="no-announcements">No announcements available.</p>
    {% endif %}
</div>
{% endblock %}
